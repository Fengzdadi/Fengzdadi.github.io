{{- $sections := .Site.Params.mainSections | default (slice "post") -}}
{{- $filtered := where .Site.RegularPages "Type" "in" $sections -}}
{{- $pages := sort $filtered "Date" "desc" -}}
{{- $items := slice -}}
{{- range $pages -}}
{{- $items = $items | append (dict
"title" .Title
"summary" (.Summary | plainify)
"tags" (.Params.tags | default (slice))
"categories" (.Params.categories | default (slice))
"date" (.Date.Format "2006-01-02T15:04:05Z07:00")
"url" .RelPermalink
) -}}
{{- end -}}
{{- $items | jsonify -}}